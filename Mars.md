# Mars Code 阅读笔记

为了保证好奇号火星探测器上的软件的可靠性，这篇文章采用了以下几种方法来保证软件的可靠性：
* 采用规避风险的代码规范
* 使用工具来进行代码审议
* 通过模型检测来验证代码的正确性

### 规避风险的代码规范

为了规避风险，采用了一下几级的代码标准：
* LOC1:代码必须通过编译，并且没有触发编译器和静态分析工具的警告。
* LOC2:所有执行都可预测。
* LOC3:代码中assert的密度要求至少为2%
* LOC4:限制预处理器，函数指针等功能的使用
* LOC5,6 : 所有已知的MISRA C的代码规范

### 使用工具的代码审议
同时使用多种已有的代码分析工具，并将他们的所有输出合并在一起输出。

在同行审议中，审阅者会在Scrub中添加自己的观察。项目的拥有者需要对每一个报告做出回复，如同意，不同意和需要讨论。

### 模型检验
使用Spin等工具检验多线程情况下代码的正确性是否有保证。

具体在使用时，首先，通过使用Modex，来自动从代码和配置文件中生成模型。接着，再通过Spin来检验模型的正确性。当然，实际中，人也会手工去写一些模型。

### 其他
同时，探测器上还拥有两个CPU上，在执行重要任务时，如果主CPU发生了问题，则会切换到备CPU，执行一个相对简单的逻辑。