# The Scalable Commutativity Rule: Designing Scalable Software for Multicore Processors 阅读笔记

随着处理器的核数的逐渐增多，使得软件能够在很多核上也能够发挥性能，这篇文章从接口角度，提出了SIM交换性规则。只要软件的接口能够满足SIM交换性规则，则一定存在一种没有冲突的，可扩展性的实现。这篇论文基于这个原则，设计了sv6，其在众核机器上的性能远强于linux的实现。

### SIM交换规则

如果在一个线程中交换了两个操作，并不影响它们得出的结果，则称这两个操作为可交换的。论文中证明了如果两个操作可以交换，则这个操作一定存在一种没有冲突的，可扩展性的实现。

### 设计可交换接口的技巧

有以下几种情况，可以通过重新设计接口，来使其满足SIM交换规则
* 把复杂的操作分解为简单的操作。如stat函数仅仅只返回个别的域，而并不是返回所有信息
* 去掉一些并不需要的功能需要，比如POSIX的返回最小的可用的FD
* 去掉不需要的排序，比如send和recv中的排序操作
* 异步地释放资源

### COMMUTER

COMMUTER工具可以用来帮助开发者设计和实现更好的可扩展性的接口，其包括以下几个部分：
* Analyzer: 用于分析接口在什么情况下可以交换
* TestGen : 用于自动生成测试
* MTrace: 用于分析cacheline的冲突情况

### 实验结果

作者利用以上的工具，采用了很多优化，最终设计实现了sv6，其扩展性远强于linux的。